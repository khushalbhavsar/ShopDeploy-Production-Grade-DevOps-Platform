#==============================================================================
# ShopDeploy Frontend - Staging Values
# Override configuration for staging environment
#==============================================================================

global:
  environment: staging
  # namespace is set via --namespace flag in helm command

replicaCount: 2

image:
  pullPolicy: IfNotPresent

#------------------------------------------------------------------------------
# Resource Configuration (Staging - Medium resources)
#------------------------------------------------------------------------------
resources:
  requests:
    cpu: 50m
    memory: 128Mi
  limits:
    cpu: 200m
    memory: 256Mi

#------------------------------------------------------------------------------
# Autoscaling Configuration
#------------------------------------------------------------------------------
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 4
  targetCPUUtilizationPercentage: 75

#------------------------------------------------------------------------------
# Environment Variables
#------------------------------------------------------------------------------
env:
  VITE_API_URL: "https://api-staging.shopdeploy.example.com"

#------------------------------------------------------------------------------
# Service Configuration (nginx-unprivileged listens on 8080)
#------------------------------------------------------------------------------
service:
  type: ClusterIP
  port: 80
  targetPort: 8080

#------------------------------------------------------------------------------
# Ingress Configuration
#------------------------------------------------------------------------------
ingress:
  enabled: true
  className: "alb"
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
  hosts:
    - host: staging.shopdeploy.example.com
      paths:
        - path: /
          pathType: Prefix

#------------------------------------------------------------------------------
# ConfigMap Data
#------------------------------------------------------------------------------
config:
  VITE_API_URL: "http://shopdeploy-backend:5000/api"

#------------------------------------------------------------------------------
# Pod Disruption Budget
#------------------------------------------------------------------------------
podDisruptionBudget:
  enabled: true
  minAvailable: 1
